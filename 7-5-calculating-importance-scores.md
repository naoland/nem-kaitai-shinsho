# 7.5 インポータンススコアの計算

これまで、[承認済み残高（vested amount）](https://nemlog.nem.social/blog/13483)、[アウトリンクマトリックス](https://nemlog.nem.social/blog/13907)、[NCDawareRankスコア](https://nemlog.nem.social/blog/14116)と、３種類のインポータンスに影響を与える値について、それぞれ説明してきました。いよいよ、今回はこれらの数値を使ってインポータンスを計算する方法についてです。

---

インポータンスΨは下記の式で計算されます。

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/15000/15500/15500/1551055969%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-25%209.51.07.png)

νは、アカウントが持つ承認済みXEM残高。

σは、アウトリンク値（今回は受け取ったXEMの総和の２倍と仮定。もしかしたら違ってるかも）。

πは、NCDawareRankスコア。

Χは、クラスタに所属するアカウントでは1.0で、その他（ハブアカウントや外れアカウント）では0.9。

w0 = 1.25, wi = 0.1337です。

```
実際に計算する場合、インポータンスを計算したいアカウントの承認済みXEM残高（vested amount of XEM）とアウトリンク値に係数1.25をかけた値を足し合わせます。それを、インポータンス計算に使われるすべてのアカウントのスコアを合計した数値で割ります（normalize1）。そこにNCDawareRankの値を足して、クラスタ所属かそうじゃないかで1.0または0.9をかけます。なんのこっちゃ？

 

分かりにくいので、少し乱暴ですが具体的に計算してみましょう。例えば10,000XEMの承認残高を持つアカウントが、取引所アカウントから1,000XEMを受け取った場合には、ν+1.25σ = 10000 + 2000*1.25 = 12500。NEMnodesにある、実際のインポータンス所有アカウントのリストから合計保有XEM量を計算すると、約2,700,000,000XEMになります。月間の減衰を考慮した総トランザクション量が150,000,000XEMくらいだと仮定して、すべて集計するとnormalizeの分母は3,000,000,000。これでさっきの12,500を割りますから、normalize1(ν + 1.25σ）= 0.0000041 (4.1 x 10-6)。そこにNCDawareRankスコア（有資格アカウントで1を奪い合うので、平均1/15000くらいになるはずです。末端の新米アカウントだとその1/100以下で10-6以下だと思いますが、とりあえず6.73 x 10-6としておきます）に0.1337をかけた値が加わったとしても0.9 x 10-6です。これらの数値を足し合わせると、このアカウントのインポータンス値は5 x 10-6と計算できます。
```

これらの情報から計算された数値を、そのアカウントがNEMネットワークに与えている影響度＝インポータンスとして用いられることになります。

さらに、インポータンス値は、任意に操作したり、競い合ったりができにくくなっており（7.6で説明予定）、ブロックチェーンの承認資格を得るためだけではなく、他にも役割を与えることができます。

例えば、インポータンスはアカウントの社会的評価とも言える数値で、複数のアカウントが持つインポータンス値を足し合わせることにも意味があるため、例えば投票やスパム抑止用にも使えます。

これによって、匿名のプレイヤーが結託し、架空の勢力を作ってネットワークの乗っ取りを企てることもできません。


---

コメント：

```
ここまで読み解いたところ、承認XEM残高、トランザクション量、NCDawareRankスコアがインポータンスに与える寄与率は、大体の予想ですが、66%, 16%, 18%程度となりました。正確な数値は、コードにパッチを当てて、NCDawareRank値などを運用中のNISノードの中から取り出してみないと分かりません。でも、自分のアカウントを考えても、1000XEMというトランザクションは１ヶ月に１回くらいしか起きないですから、インポータンスに与える承認済みXEM残高の影響が、非常に大きいと思います。インポータンスを上げたかったらとりあえずXEMを増やしましょう！ってことですね。

 

インポータンスの特徴ともなっているトランザクション量や、ネットワーククラスタ値（NCDawareRank）の影響力を大きくするためには、まず1000XEM以上のトランザクションのみ考慮するというのを、100XEMとか10XEM以下に緩和するのが良いと思います。そうすればネムログで投げられているXEMも、インポータンスに影響してきます。必要なXEM残高10000XEMも、もう少し緩和して3000XEMくらいにしたらどうかなと思います。

 

次回は、これらの工夫によって、実際にどの程度悪意ある操作からNEM経済圏が守られているのかのシミュレーションについてです。

```
