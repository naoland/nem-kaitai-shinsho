7.2 アウトリンクマトリックス

連休明けでぼーっとしています。今回からインポータンス計算の本論に入っていきます。まずは、アウトリンクマトリックスですが、NEMの技術仕様の中でも、最も分かりにくい考え方のひとつです。

---

まずPoI計算が、ブロック高 h でおこなわれると仮定します。

ブロック高 h における承認済み（vested）XEMが10000以上あるアカウントが、PoIの計算に参加する資格があります。

資格のあるアカウントについて、NEMネットワーク（ノード）は下記の条件にあてはまるトランザクション情報をすべて集めます。

 

・少なくとも1000XEMが送付されている。

・43200ブロック以内（約30日以内）に行われた。

・受け取り側もPoI計算の資格を持っている（7.1 インポータンス計算に参加する資格参照）。

 

それぞれのトランザクション Tk が、AiというアカウントからμXEMを、Ajというアカウントに送付したとします。

その時のブロック高をhijkとした場合に、そのトランザクションの重み（wijk）は以下の式で計算されます。

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549934030%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2010.13.32.png)

```この式はいろいろ誤解しやすいので、図８と同じになるように、x日目の10000XEMの価格yを表す数式を書いておきます。```

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549935113%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2010.30.59.png)

これだと、ちゃんと図８のグラフのようになります。

半減期が大体１週間になるように調節されているのが分かります。

つまり、10000XEMは１週間で5000XEMになり２週間で2500XEMの評価額になります。

３１日経つと送金としての評価額は０になります（インポータンスは０にはなりません）。

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549935226%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2010.33.32.png)

過去30日間に、AiとAj間で行われたすべてのトランザクションが集計されます。  
![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549935468%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2010.37.24.png)

```
Ai（例えば取引所）からAj（自分のアカウント）に10000XEMの送金をすると、~Wij = 10000XEM（~は上に乗せられないので前に書きます）、~Wjiは-10000XEMになります（送付方向 i->j がプラスで、逆 j->i が・マイナスという計算をしています）。ちなみに、受け取ったXEMを同じアカウントに送り返したりすると、プラス・マイナスが逆転して、この式の中で打ち消しあってしまいます。
```
 

ここで、

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549935492%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2010.37.31.png)

この式が多分間違っています。~Wjiと~Wijが逆です（[こちら](http://nonem.hatenablog.com/entry/2017/08/29/230718)の解説でも間違いじゃないかとおっしゃってます）。上の例では、~Oij = ~Wij - ~Wji = 20000です。逆に、~Ojiは-20000になりますが、負の値は０として計算されます。

送金した側にメリットはなく、受け取った側にポイントが付きます。多くのサイトで、送った側にもポイントが入ると言われていますが、実際には受け取った側だけに入るようです。

つまり、取引所から10000XEMを出金した場合に、受け取った自分のアカウント側にだけポイントが加算されます。


最後に、アウトリンクマトリックスOの要素Oijは以下の式になります。

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549936698%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2010.58.03.png)

```
この式もものすごく分かりにくくて、とりあえず、以下のように解釈しておきます。

自分のアカウントAjが取引所アカウントAiから10000XEMを送付されると、~Oijは送金額の倍額（20000XEM）になります。

どこからもXEMを受け取らなかったり、XEMの送付だけを行った場合のOijはすべて０です。つまり、取引所のアカウントのように、たくさんのXEMを多くのアカウントに配っただけの場合は、Oijはゼロになります。
```

アウトリンクマトリックスの要素Oijは、過去３０日間に行われた、AiからAjに向けての、重み付けされたXEMのネット送金量になります。

つまり、互いに送金し合った場合は、それらが打ち消しあって、トータルでどのくらいのXEMが送金されたかがインポータンスに影響します。


---

（コメント）

ここのアウトリンクの解釈が難しいのです。でも実際に10000XEMを取引所から送付した場合に、自分のアカウント側にインポータンスが付くこと。自分のアカウントから取引所のアカウントに1000XEM以上送付しても、送金側の自分のアカウントのインポータンスにはvestedXEM額が減少したことによる変化しか見られない気がする事などから、下記のような解釈をしてみました。なので他のサイトとは解釈が異なるかもしれません。

 

インリンクとアウトリンクの違いについては、ここのPDFの図が分かりやすいです。たくさんのサイトからリンクが張られているサイトを、アウトリンクマトリックスで解釈すると高い数値を得ます。

 ![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549950790%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2014.46.46.png)


 これは、あるホームページのリンクの流れを示している図です。ページ１を起点として、リンクをたどって何人がページを移動したかを数値化しています。

 ![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549950862%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2014.46.55.png)


これを行列にするとこうなります。ページ１からページ２に1800人移動したというのがこのように描けます。

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549950919%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2014.47.04.png)


上の行列をアウトリンクで解釈して、割合計算すると、このようになります。ページ１からは人が分散して他のページに飛ぶので、割合の合計を１とすると、ひとつひとつのページの重みは小さくなります。ページ２の重みは0.2になってしまいます。

一方、人が最終的に集まるページ１１は、どのリンク元とも１対１の関係を持っているため、全て割合は１です。結果的に１１のページのアウトリンクの重みは高くなります。おそらく、この数値を縦に足し合わせたものが、アウトリンク上の重みになると思われます（記述なし）。

![](https://s3-ap-northeast-1.amazonaws.com/nem-social/blog/10000/13000/13900/13907/1549952557%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202019-02-12%2014.47.13.png)


参考までに、同じ行列をインリンク解釈するとこうなります。

 

暗号通貨の場合も、大量のXEM送付が発生する取引所やプレマインアカウントより、多数のアカウントを経由してXEMが集積するアカウントにインポータンスを振り分けたほうが、活性化につながると思われます。Webページで、たくさんのリンクをただ張ってあるサイトより、たくさんのサイトからリンクが張られているサイトのほうが重要度が高いのと同じ考え方です。

 

インリンクやアウトリンクの言葉の使い方など含めて、まだ充分に理解できていません。この解釈が間違っていた場合、今後矛盾が出てくるはずですから、逐次修正していくことにします。

 

このあたり、本当に難しいです。今回も読んでくださってありがとうございます。

